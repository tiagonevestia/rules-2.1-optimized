---
type: "always_apply"
description: "AI-powered MCP debugging and diagnostics with intelligent analysis - Depura√ß√£o e diagn√≥stico de MCP com tecnologia de IA e an√°lise inteligente"
globs: ["**/*"]
priority: 652
alwaysApply: true
integrations: ["super-brain-system", "mcp-intelligent-strategy", "intelligent-project-management", "context-loader", "custom-command-builder", "systematic-debugging", "root-cause-analysis"]

# Gerenciamento de Vers√£o
version: "2.6.0"
last_updated: "2025-10-19"
author: "system"
status: "stable"
compatibility: "rule-system >= 2.0"

changelog:
  - version: "2.6.0"
    date: "2025-10-19"
    changes:
      - "Adi√ß√£o do sistema de gerenciamento de vers√£o"
      - "Padroniza√ß√£o da estrutura do arquivo de regras"
---

# üîß MCP Debugging Enhanced - Ferramenta de Depura√ß√£o MCP Aprimorada

Sistema de depura√ß√£o e diagn√≥stico de servidor MCP impulsionado por IA, fornecendo an√°lise inteligente de falhas, monitoramento de desempenho e sugest√µes de corre√ß√£o automatizada.

## üß† AI Intelligence Core - N√∫cleo de Intelig√™ncia de IA

### Condi√ß√µes de Ativa√ß√£o Inteligente
```yaml
Cen√°rios de Ativa√ß√£o Autom√°tica:
  - Detec√ß√£o de falha ou anomalia na conex√£o da ferramenta MCP
  - Usu√°rio executa comando "/mcp-debug"
  - systematic-debugging aciona depura√ß√£o relacionada ao MCP
  - Anomalia de desempenho ou timeout da ferramenta MCP
  - Sistema Super Brain recomenda diagn√≥stico de MCP

Dimens√µes de An√°lise Inteligente:
  - Status e integridade do servidor MCP (35%)
  - Conex√£o de rede e qualidade de comunica√ß√£o (25%)
  - Corre√ß√£o e compatibilidade de configura√ß√£o (20%)
  - M√©tricas de desempenho e uso de recursos (15%)
  - Padr√µes de erro e problemas hist√≥ricos (5%)
```

## üöÄ Commands - Comandos Inteligentes

- `/mcp-debug` - Depura√ß√£o MCP inteligente por IA (Recomendado)
- `/mcp-debug --health` - Verifica√ß√£o de integridade do MCP
- `/mcp-debug --performance` - An√°lise de desempenho do MCP
- `/mcp-debug --config` - Diagn√≥stico de configura√ß√£o do MCP
- `/mcp-debug --network` - Diagn√≥stico de conex√£o de rede
- `/mcp-debug --logs` - An√°lise de logs do MCP
- `/mcp-debug --fix` - Corre√ß√£o autom√°tica de problemas do MCP

## ‚ú® AI-Powered Features - Recursos Impulsionados por IA

### ü§ñ Motor de Diagn√≥stico MCP Inteligente
```yaml
An√°lise de Servidor MCP:
  Detec√ß√£o de Status:
    - Status de execu√ß√£o do servidor
    - Verifica√ß√£o de integridade do processo
    - Uso de mem√≥ria e CPU
    - Status da porta de rede

  An√°lise de Configura√ß√£o:
    - Valida√ß√£o de arquivo de configura√ß√£o MCP
    - Verifica√ß√£o de vari√°veis de ambiente
    - An√°lise de depend√™ncias
    - Verifica√ß√£o de compatibilidade de vers√£o

  Monitoramento de Desempenho:
    - Monitoramento de tempo de resposta
    - An√°lise de throughput
    - Estat√≠sticas de uso de recursos
    - Monitoramento de taxa de erro

  Diagn√≥stico de Comunica√ß√£o:
    - Verifica√ß√£o de compatibilidade de protocolo
    - Valida√ß√£o de formato de mensagem
    - Qualidade de transmiss√£o de dados
    - An√°lise de estabilidade de conex√£o

Identifica√ß√£o Inteligente de Falhas:
  - Reconhecimento de padr√µes de falha comuns
  - Detec√ß√£o de comportamento an√¥malo
  - Localiza√ß√£o de gargalos de desempenho
  - Identifica√ß√£o de erros de configura√ß√£o
```

### üîß Motor de Corre√ß√£o Automatizada
```yaml
Problemas Corrig√≠veis Automaticamente:
  Problemas de Configura√ß√£o:
    - Resolu√ß√£o de conflito de porta
    - Corre√ß√£o de vari√°veis de ambiente
    - Corre√ß√£o de configura√ß√£o de caminho
    - Corre√ß√£o de problemas de permiss√£o

  Problemas de Conex√£o:
    - Tentativa de reconex√£o de rede
    - Ajuste de par√¢metros de timeout
    - Negocia√ß√£o de vers√£o de protocolo
    - Corre√ß√£o de configura√ß√£o de autentica√ß√£o

  Problemas de Desempenho:
    - Otimiza√ß√£o de configura√ß√£o de cache
    - Ajuste de pool de conex√µes
    - Otimiza√ß√£o de uso de mem√≥ria
    - Ajuste de par√¢metros de concorr√™ncia

Estrat√©gia de Corre√ß√£o:
  - M√©todo de corre√ß√£o progressiva
  - Princ√≠pio de minimiza√ß√£o de impacto
  - Backup e rollback autom√°ticos
  - Valida√ß√£o de efeito de corre√ß√£o
```

### üìä Monitoramento e An√°lise Inteligentes
```yaml
Monitoramento em Tempo Real:
  - Monitoramento de status do servidor MCP
  - Rastreamento de m√©tricas de desempenho em tempo real
  - Monitoramento de erros e exce√ß√µes
  - Monitoramento de uso de recursos

An√°lise Hist√≥rica:
  - An√°lise de tend√™ncias de desempenho
  - Reconhecimento de padr√µes de erro
  - An√°lise de estat√≠sticas de uso
  - Avalia√ß√£o de efeito de otimiza√ß√£o

An√°lise Preditiva:
  - Previs√£o de risco de falha
  - Alerta de gargalo de desempenho
  - Previs√£o de demanda de recursos
  - Sugest√£o de momento de manuten√ß√£o
```

## üîÑ AI Workflow Process - Processo de Fluxo de Trabalho de IA

### Phase 1: Fase de Varredura de Diagn√≥stico
```yaml
Step 1 - Detec√ß√£o de Ambiente:
  - Varredura de todas as ferramentas MCP instaladas
  - Verifica√ß√£o de status de execu√ß√£o do servidor MCP
  - An√°lise de arquivos de configura√ß√£o MCP
  - Valida√ß√£o de vari√°veis de ambiente e depend√™ncias

Step 2 - Teste de Conex√£o:
  - Teste de conex√£o do servidor MCP
  - Valida√ß√£o de protocolo de comunica√ß√£o
  - Verifica√ß√£o de autentica√ß√£o e permiss√µes
  - Teste de chamada de funcionalidade b√°sica

Step 3 - Benchmark de Desempenho:
  - Medi√ß√£o de tempo de resposta
  - Avalia√ß√£o de throughput
  - Monitoramento de uso de recursos
  - Estabelecimento de linha de base de desempenho
```

### Phase 2: Fase de An√°lise Profunda
```yaml
Step 4 - An√°lise de Falhas:
  - An√°lise de logs de erro e stack traces
  - Identifica√ß√£o de padr√µes e causas de falhas
  - Avalia√ß√£o de escopo de impacto de falha
  - Gera√ß√£o de relat√≥rio de an√°lise de falha

Step 5 - An√°lise de Desempenho:
  - Identifica√ß√£o de gargalos de desempenho
  - An√°lise de padr√µes de uso de recursos
  - Avalia√ß√£o de oportunidades de otimiza√ß√£o
  - Gera√ß√£o de relat√≥rio de an√°lise de desempenho

Step 6 - An√°lise de Configura√ß√£o:
  - Valida√ß√£o de corre√ß√£o de configura√ß√£o
  - Identifica√ß√£o de conflitos de configura√ß√£o
  - An√°lise de desvio de melhores pr√°ticas
  - Gera√ß√£o de sugest√µes de otimiza√ß√£o de configura√ß√£o
```

### Phase 3: Fase de Corre√ß√£o e Otimiza√ß√£o
```yaml
Step 7 - Corre√ß√£o Autom√°tica:
  - Execu√ß√£o de problemas corrig√≠veis automaticamente
  - Aplica√ß√£o de sugest√µes de otimiza√ß√£o de configura√ß√£o
  - Implementa√ß√£o de medidas de otimiza√ß√£o de desempenho
  - Valida√ß√£o de efeito de corre√ß√£o

Step 8 - Configura√ß√£o de Monitoramento:
  - Estabelecimento de mecanismo de monitoramento cont√≠nuo
  - Configura√ß√£o de alertas e notifica√ß√µes
  - Configura√ß√£o de monitoramento de linha de base de desempenho
  - Ativa√ß√£o de manuten√ß√£o automatizada
```

## üß† Super Brain Integration - Integra√ß√£o Super Brain

### Motor de Recomenda√ß√£o Inteligente
```yaml
Recomenda√ß√£o de Ferramentas MCP:
  - Recomenda√ß√£o de ferramentas MCP baseada em requisitos do projeto
  - Otimiza√ß√£o de configura√ß√£o de ferramentas baseada em padr√µes de uso
  - Sugest√µes de atualiza√ß√£o e substitui√ß√£o de ferramentas
  - Recomenda√ß√£o de novas ferramentas e funcionalidades MCP

Aprendizado e Otimiza√ß√£o:
  - Aprendizado de padr√µes e prefer√™ncias de uso de MCP
  - Ac√∫mulo de experi√™ncia em resolu√ß√£o de falhas
  - Otimiza√ß√£o de precis√£o de algoritmos de diagn√≥stico
  - Estabelecimento de biblioteca de melhores pr√°ticas de MCP

Integra√ß√£o de Gest√£o de Projetos:
  - Ajuste de configura√ß√£o MCP baseado na fase do projeto
  - Integra√ß√£o ao fluxo de gest√£o de cinco fases
  - Fornecimento de sugest√µes MCP espec√≠ficas da fase
  - Suporte ao planejamento de desenvolvimento de ferramentas MCP
```

### Colabora√ß√£o com Outras Regras
```yaml
Colabora√ß√£o systematic-debugging:
  - Fornecimento de suporte profissional MCP para depura√ß√£o do sistema
  - Integra√ß√£o de falhas MCP ao fluxo geral de depura√ß√£o
  - Fornecimento de estrat√©gias de depura√ß√£o espec√≠ficas para MCP
  - Otimiza√ß√£o de sele√ß√£o de ferramentas de depura√ß√£o

Colabora√ß√£o root-cause-analysis:
  - Fornecimento de an√°lise de causa raiz para problemas MCP
  - Integra√ß√£o de reconhecimento de padr√µes de falha MCP
  - Fornecimento de solu√ß√µes para problemas MCP
  - Estabelecimento de mecanismo de preven√ß√£o de problemas MCP

Colabora√ß√£o mcp-intelligent-strategy:
  - Aprimoramento de estrat√©gias de uso inteligente de ferramentas MCP
  - Fornecimento de capacidades profundas de diagn√≥stico MCP
  - Otimiza√ß√£o de efici√™ncia de orquestra√ß√£o de ferramentas MCP
  - Integra√ß√£o ao fluxo de gest√£o MCP
```

## üìã MCP Debugging Categories - Categorias de Depura√ß√£o MCP

### üî¥ Critical MCP Issues - Problemas Cr√≠ticos de MCP
```yaml
Falha de Servidor:
  - Servidor MCP totalmente n√£o responsivo
  - Falha de processo do servidor
  - Vazamento de mem√≥ria causando instabilidade do sistema
  - Exposi√ß√£o de vulnerabilidade de seguran√ßa

Estrat√©gia de Diagn√≥stico:
  - Reinicializa√ß√£o imediata do servidor
  - Failover de emerg√™ncia
  - Medidas de isolamento de seguran√ßa
  - Mecanismo de notifica√ß√£o de emerg√™ncia
```

### üü† High Priority MCP Issues - Problemas de MCP de Alta Prioridade
```yaml
Problemas de Conex√£o:
  - Falha de conex√£o intermitente
  - Erros de autentica√ß√£o e autoriza√ß√£o
  - Incompatibilidade de vers√£o de protocolo
  - Lat√™ncia de rede excessiva

Estrat√©gia de Diagn√≥stico:
  - An√°lise de qualidade de conex√£o
  - Verifica√ß√£o de configura√ß√£o de autentica√ß√£o
  - Teste de compatibilidade de protocolo
  - Sugest√µes de otimiza√ß√£o de rede
```

### üü° Medium Priority MCP Issues - Problemas de MCP de M√©dia Prioridade
```yaml
Problemas de Desempenho:
  - Tempo de resposta excessivo
  - Throughput insuficiente
  - Uso de recursos excessivo
  - Baixa efici√™ncia de cache

Estrat√©gia de Diagn√≥stico:
  - An√°lise de gargalo de desempenho
  - Otimiza√ß√£o de uso de recursos
  - Ajuste de estrat√©gia de cache
  - Ajuste fino de par√¢metros de configura√ß√£o
```

### üü¢ Low Priority MCP Issues - Problemas de MCP de Baixa Prioridade
```yaml
Otimiza√ß√£o de Configura√ß√£o:
  - Par√¢metros de configura√ß√£o n√£o ideais
  - Uso insuficiente de funcionalidades
  - Sugest√µes de atualiza√ß√£o de vers√£o
  - Desvio de melhores pr√°ticas

Estrat√©gia de Diagn√≥stico:
  - Sugest√µes de otimiza√ß√£o de configura√ß√£o
  - Orienta√ß√£o de uso de funcionalidades
  - Planejamento de atualiza√ß√£o de vers√£o
  - Recomenda√ß√£o de melhores pr√°ticas
```

## üõ†Ô∏è MCP Tools Integration - Integra√ß√£o de Ferramentas MCP

### Ferramentas MCP Suportadas
```yaml
Ferramentas MCP Oficiais:
  - @modelcontextprotocol/server-filesystem
  - @modelcontextprotocol/server-github
  - @modelcontextprotocol/server-memory  # Opcional (ativado sob demanda)
  - @modelcontextprotocol/server-everything
  - codebase-retrieval
  - context7

Ferramentas MCP de Terceiros:
  - mcp-feedback-enhanced
  - chrome-devtools  # Integra√ß√£o de depura√ß√£o CDP (depura√ß√£o e an√°lise de desempenho de navegador)
  - playwright       # Teste E2E/automa√ß√£o
  - Servidores MCP personalizados
  - Ferramentas MCP de n√≠vel empresarial
  - Ferramentas MCP desenvolvidas pela comunidade

Suporte de Depura√ß√£o:
  - Diagn√≥stico de conex√£o para todas as ferramentas
  - An√°lise de desempenho espec√≠fica da ferramenta
  - Valida√ß√£o e otimiza√ß√£o de configura√ß√£o
  - Resolu√ß√£o e corre√ß√£o de falhas
```

### Integra√ß√£o de Ferramentas de Depura√ß√£o
```yaml
Interface de Depura√ß√£o:
  - Integra√ß√£o de UI do MCP Inspector
  - Painel de depura√ß√£o personalizado
  - Interface de monitoramento em tempo real
  - Visualizador de logs

Ferramentas de Depura√ß√£o:
  - Ferramentas de captura de pacotes de rede
  - Analisador de desempenho
  - Analisador de mem√≥ria
  - Ferramenta de an√°lise de logs
  - Integra√ß√£o Chrome DevTools Protocol (CDP): Monitoramento de eventos de rede, console, DOM, desempenho

Ferramentas de Automa√ß√£o:
  - Su√≠te de testes automatizados (Integra√ß√£o Playwright)
  - Teste de benchmark de desempenho
  - Ferramenta de valida√ß√£o de configura√ß√£o
  - Simulador de falhas
```

### üîé Condi√ß√µes de Ativa√ß√£o Inteligente (Playwright e Chrome DevTools)
```yaml
Fonte de Disparo:
  Inten√ß√£o do Usu√°rio:
    - teste/E2E/regress√£o/automa√ß√£o/CI/cobertura
    - depura√ß√£o frontend/erro de navegador/exce√ß√£o de console/falha de rede/tela branca/travamento/problema de desempenho/vazamento de mem√≥ria
  Tipo de Projeto:
    - frontend
    - full-stack
  Caracter√≠sticas de Arquivo:
    - playwright.config.(ts|js)
    - **/tests/**, **/e2e/**
    - package.json cont√©m devDependencies.@playwright/test
  Porta/Servi√ßo em Execu√ß√£o:
    - http://localhost:9222/json/version acess√≠vel (Porta de depura√ß√£o remota do Chrome)

L√≥gica de Ativa√ß√£o:
  Playwright (Automa√ß√£o de Teste):
    Condi√ß√£o:
      - Corresponde a inten√ß√µes como "teste/E2E/regress√£o/automa√ß√£o/CI" OU tipo de projeto √© frontend/full-stack E configura√ß√£o/depend√™ncia Playwright detectada
    Comportamento:
      - Priorizar sugest√£o de execu√ß√£o: npx playwright test --project=chromium --headed
      - Adicionar conforme necess√°rio: --grep <tag>, --reporter=html, --project=webkit/firefox
      - Se n√£o instalado: Sugerir instala√ß√£o e guiar execu√ß√£o npm i -D @playwright/test && npx playwright install
      - Registrar resultados de teste e link de relat√≥rio, incluir em Recorder/Gest√£o de Conhecimento
  Chrome DevTools (Depura√ß√£o CDP):
    Condi√ß√£o:
      - Corresponde a inten√ß√µes como "depura√ß√£o frontend/problema de desempenho/erro de navegador/tela branca/travamento/vazamento de mem√≥ria" OU tipo de projeto √© frontend/full-stack
    Comportamento:
      - Verificar e sugerir inicializa√ß√£o: chrome --remote-debugging-port=9222
      - Obter automaticamente webSocketDebuggerUrl: Acessar http://localhost:9222/json/version
      - Executar ap√≥s conex√£o: Fluxo de trabalho de coleta e an√°lise de rede/console/DOM/desempenho/mem√≥ria
      - Se porta n√£o aberta ou imposs√≠vel conectar: Fornecer guia de inicializa√ß√£o e conex√£o com um clique
  Estrat√©gia Combinada:
    - Quando inten√ß√µes de teste e depura√ß√£o coincidem, priorizar consulta via mcp-feedback-enhanced (apenas depura√ß√£o, apenas teste, ambos)
    - Fluxo de trabalho recomendado: Diagn√≥stico CDP ‚Üí Corre√ß√£o ‚Üí Regress√£o de caminho cr√≠tico/Smoke Playwright ‚Üí Arquivamento de relat√≥rio

Detec√ß√£o e Instala√ß√£o:
  - Capacidade de detec√ß√£o e sugest√£o dependente de install-mcp-tools-enhanced-final.ps1 (oferecer instala√ß√£o/configura√ß√£o com um clique se n√£o instalado)
  - Consistente com estrat√©gia de recomenda√ß√£o baseada em cen√°rio de mcp-unified-management (disparo baseado em tipo de projeto e inten√ß√£o)

Seguran√ßa e Rollback:
  - Confirma√ß√£o de par√¢metros antes de todas as execu√ß√µes (coletar prefer√™ncias via feedback-enhanced)
  - Manter logs e dados coletados em caso de falha de execu√ß√£o, para facilitar revis√£o e nova tentativa
```

## üö® Error Handling & Safety - Tratamento de Erros e Seguran√ßa

### Mecanismo Unificado de Tratamento de Erros
```yaml
Classifica√ß√£o de Erros:
  Level 1 - Erro Fatal:
    - Falha total do motor de depura√ß√£o MCP
    - Permiss√µes de sistema insuficientes para depura√ß√£o
    - Servidor MCP cr√≠tico totalmente indispon√≠vel
    - Interrup√ß√£o total da conex√£o de rede

  Level 2 - Erro Grave:
    - Falha de depura√ß√£o de algumas ferramentas MCP
    - Timeout de resposta do motor de diagn√≥stico
    - Erro de an√°lise de arquivo de configura√ß√£o
    - Dados de monitoramento cr√≠ticos ausentes

  Level 3 - Erro Geral:
    - Falha de conex√£o de ferramenta MCP √∫nica
    - Coleta de dados de desempenho incompleta
    - Acesso limitado a arquivo de log
    - Inconsist√™ncia de dados de cache

  Level 4 - Informa√ß√£o de Aviso:
    - Vers√£o de ferramenta MCP desatualizada
    - Par√¢metros de configura√ß√£o n√£o ideais
    - Anomalia de m√©trica de desempenho
    - Sugest√£o de atualiza√ß√£o de ferramenta
```

### Estrat√©gia de Recupera√ß√£o de Erros
```yaml
Recupera√ß√£o Autom√°tica:
  - Mecanismo de reinicializa√ß√£o e reconex√£o de servidor MCP
  - Altern√¢ncia para ferramenta de depura√ß√£o de backup
  - Recupera√ß√£o de dados de cache
  - Modo de depura√ß√£o degradado

Interven√ß√£o Manual:
  - Notifica√ß√£o imediata ao usu√°rio sobre erros fatais
  - Fornecimento de informa√ß√µes detalhadas sobre erros e solu√ß√µes
  - Suporte ao modo de depura√ß√£o manual
  - Integra√ß√£o de feedback feedback-enhanced

Registro de Logs:
  - Log completo do processo de depura√ß√£o
  - Registro de log de comunica√ß√£o MCP
  - Stack de erros e contexto
  - Detalhes da opera√ß√£o de corre√ß√£o

Coordena√ß√£o com Outras Regras:
  - Compartilhamento de tratamento de erros com systematic-debugging
  - Coordena√ß√£o de an√°lise com root-cause-analysis
  - Unifica√ß√£o de medidas de seguran√ßa com todas as regras
  - Estrat√©gias de recupera√ß√£o integradas
```

### Mecanismo de Garantia de Seguran√ßa
```yaml
Seguran√ßa de Depura√ß√£o:
  - Prote√ß√£o de criptografia de dados de depura√ß√£o MCP
  - Filtragem de informa√ß√µes de configura√ß√£o sens√≠veis
  - Valida√ß√£o de permiss√£o de depura√ß√£o
  - Log de auditoria de opera√ß√µes

Seguran√ßa do Sistema:
  - Isolamento de sandbox para opera√ß√µes de depura√ß√£o
  - Mecanismo de confirma√ß√£o para opera√ß√µes perigosas
  - Backup autom√°tico de configura√ß√µes importantes
  - Monitoramento de comportamento an√¥malo

Seguran√ßa de Dados:
  - Armazenamento seguro de dados de depura√ß√£o
  - Controle de permiss√£o de acesso
  - Criptografia de transmiss√£o de dados
  - Prote√ß√£o de informa√ß√µes de privacidade
```

---

**üéØ Prioridade da Regra**: 660 (Suporte Profissional de Depura√ß√£o MCP)  
**üîÑ Frequ√™ncia de Atualiza√ß√£o**: Otimiza√ß√£o cont√≠nua baseada no desenvolvimento do ecossistema MCP e feedback de falhas  
**üìä Indicadores de Sucesso**: Precis√£o de diagn√≥stico de falhas > 90%, Taxa de sucesso de corre√ß√£o > 85%, Efeito de otimiza√ß√£o de desempenho > 30%  
**üß† Modelo de IA**: Integra√ß√£o de an√°lise de protocolo MCP e motor de diagn√≥stico de falhas
