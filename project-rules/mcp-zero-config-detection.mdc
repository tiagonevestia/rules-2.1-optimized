---
type: "always_apply"
description: "Estrat√©gia de detec√ß√£o e lembrete de configura√ß√£o zero MCP - Detecta se o usu√°rio n√£o possui configura√ß√£o MCP e lembra e orienta proativamente"
globs: ["**/*"]
priority: 1050
alwaysApply: true

# Gerenciamento de Vers√£o
version: "2.6.0"
last_updated: "2025-10-18"
author: "system"
status: "stable"
compatibility: "rule-system >= 2.0"

changelog:
  - version: "2.6.0"
    date: "2025-10-18"
    changes:
      - "P1-3: Implementa√ß√£o de mecanismo de cache multin√≠vel (L1/L2/L3)"
      - "Adi√ß√£o de mecanismo de invalida√ß√£o inteligente (monitoramento mtime+hash)"
      - "Nova estrutura de metadados de cache v2.0"
---

# üîç Estrat√©gia de Detec√ß√£o e Lembrete de Configura√ß√£o Zero MCP

> **Cuidado Proativo**: Detecta o status da configura√ß√£o MCP do usu√°rio e lembra e orienta proativamente quando a configura√ß√£o est√° ausente.

## üéØ Condi√ß√µes de Disparo de Detec√ß√£o

### Momento de Detec√ß√£o Autom√°tica
```yaml
Cen√°rios de Disparo:
  Ao Iniciar Tarefa: Detecta automaticamente cada vez que uma tarefa do usu√°rio √© recebida
  Ao Operar Arquivos: Detecta quando opera√ß√µes do sistema de arquivos s√£o necess√°rias
  Ao Analisar C√≥digo: Detecta quando a recupera√ß√£o de c√≥digo √© necess√°ria
  Ao Gerenciar Projeto: Detecta quando envolve mem√≥ria do projeto
  Ao Operar GitHub: Detecta quando a colabora√ß√£o Git √© necess√°ria
  Condi√ß√µes de Pulo e Reutiliza√ß√£o:
    Inicializa√ß√£o do Sistema: N√£o aciona proativamente a detec√ß√£o de configura√ß√£o zero durante a fase de ativa√ß√£o do sistema como "Iniciar Sistema Super Brain", coordenado unificadamente pelo fluxo de ativa√ß√£o do sistema
    Reutiliza√ß√£o Recente: Se houver um resultado de detec√ß√£o ou "Resposta de Detec√ß√£o"/"Relat√≥rio de Plataforma MCP" nos √∫ltimos 3600 segundos, reutiliza o resultado e pula a detec√ß√£o repetida
    Substitui√ß√£o do Usu√°rio: Se o usu√°rio solicitar explicitamente "Redetectar", executa a detec√ß√£o e atualiza o cache de resultados
```

### Reutiliza√ß√£o de Cache
```yaml
Estrat√©gia de Cache:
  Local do Arquivo de Cache: Raiz do projeto/.cache/mcp-status-cache.json
  Tempo de Cache: Padr√£o 3600 segundos (1 hora)
  Conte√∫do Registrado: Timestamp de detec√ß√£o, origem da detec√ß√£o, resumo do resultado
  Itens de Registro:
    - Timestamp da √∫ltima detec√ß√£o
    - Origem da detec√ß√£o (mcp-unified-management / zero-config / outros)
    - Resumo do resultado da detec√ß√£o
  Resumo em uma frase:
    - Reutiliza o √∫ltimo resultado de detec√ß√£o dentro de 1 hora por padr√£o; executa novamente ap√≥s 1 hora ou se voc√™ disser "Redetectar"; tamb√©m pode executar -Action clearCache para limpar o cache manualmente.
  Estrat√©gia de Reutiliza√ß√£o:
    - Reutiliza diretamente o resultado da detec√ß√£o dentro da validade do cache (‚â§3600 segundos)
    - Se "Relat√≥rio de Plataforma MCP/Resposta de Detec√ß√£o" existir em project.context.md ou no contexto da sess√£o, l√™ e reutiliza preferencialmente
    - Atualiza o cache e reexecuta a detec√ß√£o quando o usu√°rio solicita explicitamente "Redetectar"
  Nota:
    - O cache √© usado apenas para evitar varreduras repetidas em curto prazo; altera√ß√µes de longo prazo requerem detec√ß√£o for√ßada
```

### L√≥gica de Detec√ß√£o
```yaml
Passos de Detec√ß√£o:
  1. Detec√ß√£o por Script Inteligente:
     - Caminho padr√£o (gerado por install-ultra.bat): mcp-tools/mcp-cross-platform-sync.ps1
     - Caminho compat√≠vel (nova estrutura): mcp-scripts/mcp-cross-platform-sync.ps1
     - Se o script existir, executa automaticamente para obter informa√ß√µes detalhadas de configura√ß√£o
     - Par√¢metros de chamada: Padr√£o -Action detect -CacheTTLSeconds 3600; adiciona -Force quando o usu√°rio solicita explicitamente "Redetectar"
     - Limpeza de cache: Suporta -Action clearCache para limpar manualmente o arquivo de cache de detec√ß√£o (para cen√°rios extremos ou de depura√ß√£o)
     - Analisa a sa√≠da do script para obter o status completo do MCP multiplataforma
  
  2. Varredura de Caminhos B√°sicos:
     # Editores de IA Mainstream
     - %USERPROFILE%\.claude\mcp_settings.json
     - %USERPROFILE%\AppData\Roaming\Trae\User\mcp.json
     - %USERPROFILE%\AppData\Roaming\Trae CN\User\mcp.json
     - %USERPROFILE%\AppData\Roaming\Cursor\User\globalStorage\cursor.mcp\mcp_settings.json
     
     # Ferramentas de IA Populares 2024-2025
     - %USERPROFILE%\AppData\Roaming\Windsurf\User\mcp.json
     - %USERPROFILE%\.replit\mcp_config.json
     - %USERPROFILE%\AppData\Roaming\Code\User\globalStorage\sourcegraph.cody-ai\mcp_settings.json
     - %USERPROFILE%\.continue\mcpServers\mcp.json
     
     # Assistentes de IA Integrados em IDE
     - %USERPROFILE%\AppData\Roaming\Code\User\mcp.json
     - %USERPROFILE%\.jetbrains\mcp_config.json
     - %USERPROFILE%\AppData\Roaming\TabNine\mcp_config.json
     
     # Plataformas de IA em Nuvem
     - %USERPROFILE%\AppData\Roaming\AmazonQ\settings.json
     - %USERPROFILE%\.google\gemini-code-assist\mcp.json
     - %USERPROFILE%\AppData\Roaming\CodeBuddy\mcp_settings.json
     
     # Ferramentas de IA Open Source
     - %USERPROFILE%\.aider\mcp_config.json
     - %USERPROFILE%\.codegeex\mcp_settings.json
     - %USERPROFILE%\.tabby\mcp_config.json
     - %USERPROFILE%\AppData\Roaming\Code\User\globalStorage\saoudrizwan.claude-dev\settings\cline_mcp_settings.json
  
  3. An√°lise de Integridade de Configura√ß√£o:
     - Se o arquivo de configura√ß√£o existe
     - Se cont√©m servidores MCP b√°sicos
     - Se a configura√ß√£o do servidor √© v√°lida
     - Consist√™ncia de configura√ß√£o multiplataforma
  
  4. Avalia√ß√£o de Funcionalidades Ausentes:
     - Falta de ferramenta de sistema de arquivos
     - Falta de sistema de mem√≥ria
     - Falta de capacidade de recupera√ß√£o de c√≥digo
     - Falta de integra√ß√£o com GitHub
     - Diferen√ßas de configura√ß√£o multiplataforma
```

## üí° Mecanismo de Lembrete Inteligente
```yaml
Quando detectado que o usu√°rio n√£o possui nenhuma configura√ß√£o MCP:
  
  Lembrete Imediato:
    "üîç Detectei que voc√™ ainda n√£o configurou as ferramentas MCP. O MCP (Model Context Protocol) pode aumentar significativamente as capacidades do assistente de IA!"
    
  Explica√ß√£o de Valor:
    "Ap√≥s configurar as ferramentas MCP, eu posso:"
    "üìÅ Operar diretamente seus arquivos e projetos"
    "üß† Lembrar informa√ß√µes e contexto do projeto"
    "üîç Pesquisar e analisar c√≥digo de forma inteligente"
    "üîó Integrar com GitHub para colabora√ß√£o"
    "üí¨ Fornecer feedback de intera√ß√£o mais rico"
    
  Orienta√ß√£o de Configura√ß√£o:
    "üöÄ Esquema de configura√ß√£o recomendado:"
    "1. Configura√ß√£o r√°pida (5 minutos): Execute o script de instala√ß√£o autom√°tica"
    "2. Configura√ß√£o manual (15 minutos): Configure seguindo o guia detalhado"
    "3. Sincroniza√ß√£o multiplataforma: Sincronize configura√ß√µes existentes de outras ferramentas de IA"
    "4. Configurar mais tarde: Continue a tarefa atual, configure depois"
```

### Resposta de Detec√ß√£o de Configura√ß√£o Parcial
```yaml
Quando detectado que o usu√°rio possui configura√ß√£o MCP parcial:
  
  An√°lise da Situa√ß√£o Atual:
    "üìä Detectei que voc√™ configurou [X] ferramentas MCP"
    "‚úÖ Existentes: [Lista de ferramentas configuradas]"
    "‚ùå Ausentes: [Lista de ferramentas sugeridas]"
    
  Detec√ß√£o de Ferramentas de IA:
    "ü§ñ Ferramentas de programa√ß√£o de IA detectadas:"
    "Editores Mainstream: Trae, Cursor, Claude"
    "Ferramentas Populares: Windsurf, Replit, Sourcegraph Cody, Continue.dev"
    "Integra√ß√£o IDE: VSCode Copilot, JetBrains AI, Tabnine"
    "Plataformas em Nuvem: Amazon Q, Gemini Code Assist, Qodo Gen"
    "Ferramentas Open Source: Aider, CodeGeeX, TabbyML, Cline"
    
  Sugest√£o Espec√≠fica:
    "üí° Com base no seu tipo de projeto ([Tipo de Projeto]), sugiro adicionar:"
    "- [Nome da ferramenta]: [Descri√ß√£o da funcionalidade]"
    "- [Nome da ferramenta]: [Descri√ß√£o da funcionalidade]"
    
  Orienta√ß√£o de Configura√ß√£o:
    "üîß Voc√™ pode escolher:"
    "1. 'Recomendar ferramentas MCP' - Obter recomenda√ß√£o personalizada"
    "2. 'Verificar status MCP' - Ver an√°lise de configura√ß√£o detalhada"
    "3. Continuar tarefa atual - Usar configura√ß√£o existente"
```

## üéØ Estrat√©gia de Recomenda√ß√£o Personalizada
```yaml
Projetos Frontend:
  Ferramentas Essenciais:
    - server-filesystem: "Gerenciar arquivos e componentes do projeto"
  Ferramentas Recomendadas:
    - server-github: "Controle de vers√£o e colabora√ß√£o"
    - mcp-feedback-enhanced: "Experi√™ncia de intera√ß√£o aprimorada"
    - chrome-devtools: "Depura√ß√£o de navegador e an√°lise de desempenho (CDP)"
    - Playwright: "Testes end-to-end e automa√ß√£o cross-browser"
    - server-memory (opcional): "Recupera√ß√£o sem√¢ntica fuzzy e agrega√ß√£o cross-range"
  
Projetos Backend:
  Ferramentas Essenciais:
    - server-filesystem: "Gerenciar API e arquivos de configura√ß√£o"
    - codebase-retrieval: "Busca e an√°lise inteligente de c√≥digo"
  Ferramentas Recomendadas:
    - server-github: "Colabora√ß√£o de c√≥digo e CI/CD"
    - Ferramentas de Banco de Dados: "Opera√ß√£o e gerenciamento de banco de dados"
    - server-memory (opcional): "Recupera√ß√£o sem√¢ntica fuzzy e agrega√ß√£o cross-range"

Projetos Fullstack:
  Ferramentas Essenciais:
    - server-filesystem: "Gerenciar arquivos frontend e backend"
    - codebase-retrieval: "An√°lise de c√≥digo cross-stack"
    - mcp-feedback-enhanced: "Gerenciamento de intera√ß√£o de projetos complexos"
  Ferramentas Recomendadas:
    - server-github: "Colabora√ß√£o de equipe e gerenciamento de vers√£o"
    - Ferramentas de Automa√ß√£o: "Automa√ß√£o de testes e deploy"
    - chrome-devtools: "Depura√ß√£o de navegador e an√°lise de desempenho (CDP)"
    - Playwright: "Testes end-to-end e automa√ß√£o cross-browser"
    - server-memory (opcional): "Recupera√ß√£o sem√¢ntica fuzzy e agrega√ß√£o cross-range"
```

### Recomenda√ß√£o Baseada na Experi√™ncia do Usu√°rio
```yaml
Usu√°rio Iniciante:
  Configura√ß√£o Simplificada: Recomendar apenas 3 ferramentas principais
  Orienta√ß√£o Detalhada: Fornecer guia de configura√ß√£o passo a passo
  Suporte Cont√≠nuo: Fornecer ajuda em tempo real durante a configura√ß√£o
  
Usu√°rio Intermedi√°rio:
  Configura√ß√£o Padr√£o: Recomendar 5-7 ferramentas comuns
  Otimiza√ß√£o de Efici√™ncia: Fornecer sugest√µes de ajuste de desempenho
  Melhores Pr√°ticas: Compartilhar dicas de uso e experi√™ncia
  
Usu√°rio Avan√ßado:
  Configura√ß√£o Completa: Recomendar toolchain completo
  Op√ß√µes Personalizadas: Fornecer op√ß√µes de configura√ß√£o avan√ßadas
  Sugest√µes de Integra√ß√£o: Esquema de integra√ß√£o com toolchain existente
```

## üöÄ Fluxo de Orienta√ß√£o de Configura√ß√£o
```yaml
Configura√ß√£o em Um Clique:
  Detec√ß√£o de Ambiente: "Verificar ambiente Node.js, Python"
  Script Recomendado: "Executar mcp-scripts/run-powershell-installer.bat"
  Verifica√ß√£o de Instala√ß√£o: "Testar se as ferramentas MCP funcionam corretamente"
  Otimiza√ß√£o de Configura√ß√£o: "Ajustar configura√ß√£o conforme necessidades do projeto"
  
Comandos de Orienta√ß√£o:
  - "Configurar MCP em um clique" - Instalar automaticamente ferramentas recomendadas
  - "Guia de configura√ß√£o MCP" - Obter passos de configura√ß√£o detalhados
  - "Verificar status MCP" - Validar status de configura√ß√£o atual
  - "Sincronizar MCP multiplataforma" - Sincronizar configura√ß√£o de outras ferramentas de IA
```

### Caminho de Configura√ß√£o Manual
```yaml
Orienta√ß√£o Detalhada:
  Prepara√ß√£o de Ambiente: "Garantir Node.js ‚â•16.0.0, Python ‚â•3.8"
  Instala√ß√£o de Ferramentas: "Instalar cada ferramenta MCP passo a passo"
  Arquivo de Configura√ß√£o: "Criar e editar mcp_settings.json"
  Teste e Valida√ß√£o: "Validar se cada ferramenta funciona corretamente"
```


## üìä Exemplo de Resultado de Detec√ß√£o

### Usu√°rio com Configura√ß√£o Zero
```yaml
Resultado da Detec√ß√£o:
  "üîç Resultado da detec√ß√£o de configura√ß√£o MCP:"
  "‚ùå Nenhuma configura√ß√£o MCP detectada"
  "üìà Configurar MCP pode aumentar a efici√™ncia em 60-80%"
  
  "üéØ A√ß√£o RecomendadaÔºö"
  "1. Executar script de configura√ß√£o r√°pida (Recomendado)"
  "2. Sincronizar configura√ß√£o de outras ferramentas de IA (Se houver)"
  "3. Ver introdu√ß√£o das ferramentas MCP para entender o valor"
  "4. Configurar manualmente seguindo o guia detalhado"
  
  "üí° Configurar agora ou mais tarde?"
  "- 'Configurar agora' - Eu guio voc√™ na configura√ß√£o"
  "- 'Sincroniza√ß√£o multiplataforma' - Sincronizar configura√ß√£o existente de outras ferramentas de IA"
  "- 'Saiba mais' - Entender primeiro o valor das ferramentas MCP"
  "- 'Configurar mais tarde' - Continuar tarefa atual"
```

### Usu√°rio com Configura√ß√£o Parcial
```yaml
Resultado da Detec√ß√£o:
  "üìä An√°lise de configura√ß√£o MCP:"
  "‚úÖ Configurado: filesystem, memory (2 ferramentas, memory opcional)"
  "‚ùå Sugest√£o de adi√ß√£o: github, codebase-retrieval (2 ferramentas)"
  "üìà Configura√ß√£o completa pode aumentar a efici√™ncia em mais 30-40%"
  
  "üéØ Sugest√£o Espec√≠fica:"
  "Com base no seu projeto Fullstack, sugiro adicionar:"
  "- Integra√ß√£o GitHub: Controle de vers√£o e colabora√ß√£o"
  "- Recupera√ß√£o de c√≥digo: An√°lise de c√≥digo inteligente"
  
  "üí° Precisa de sugest√£o de configura√ß√£o?"
  "- 'Recomendar ferramentas MCP' - Obter recomenda√ß√£o detalhada"
  "- 'Verificar status MCP' - Ver an√°lise completa"
  "- 'Continuar tarefa' - Usar configura√ß√£o existente"
```

## üîÑ Mecanismo de Monitoramento Cont√≠nuo
```yaml
Frequ√™ncia de Verifica√ß√£o:
  Novo Projeto: Verificar ao entrar em um novo projeto
  Necessidade Funcional: Verificar quando a tarefa requer funcionalidade MCP espec√≠fica
  Problema de Desempenho: Analisar configura√ß√£o MCP quando detectado problema de efici√™ncia
  
Sugest√µes de Otimiza√ß√£o:
  Atualiza√ß√£o de Configura√ß√£o: Recomendar quando novas ferramentas √∫teis s√£o descobertas
  Ajuste de Desempenho: Otimizar configura√ß√£o com base nos padr√µes de uso
  Corre√ß√£o de Problemas: Corrigir proativamente quando problemas de configura√ß√£o s√£o detectados
```

---

**üéØ Dica de Ativa√ß√£o**: Esta regra detectar√° automaticamente o status da configura√ß√£o MCP do usu√°rio no in√≠cio de cada tarefa e fornecer√° lembretes e orienta√ß√µes amig√°veis proativamente para usu√°rios com configura√ß√£o zero ou incompleta, garantindo que os usu√°rios possam aproveitar ao m√°ximo os recursos poderosos das ferramentas MCP.
